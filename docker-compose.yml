services:
  feishu-cursor-bridge:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: feishu-cursor-bridge
    restart: unless-stopped
    ports:
      - "${API_PORT:-3456}:3456"
    environment:
      # 飞书应用凭证（必填）
      - FEISHU_APP_ID=${FEISHU_APP_ID}
      - FEISHU_APP_SECRET=${FEISHU_APP_SECRET}
      # Cursor CLI 配置
      - CURSOR_WORK_DIR=${CURSOR_WORK_DIR:-/workspace}
      - CURSOR_TIMEOUT=${CURSOR_TIMEOUT:-300000}
      # API 服务配置
      - API_PORT=${API_PORT:-3456}
      # ripgrep 路径（容器内已安装，无需额外配置）
      - NODE_ENV=production
    # volumes:
    #   # 挂载工作目录（可选，根据需要取消注释并修改路径）
    #   - ./workspace:/workspace
    #   # 挂载 .env 文件（如果不使用环境变量）
    #   - ./.env:/app/.env:ro
    networks:
      - feishu-bridge-network

networks:
  feishu-bridge-network:
    driver: bridge
